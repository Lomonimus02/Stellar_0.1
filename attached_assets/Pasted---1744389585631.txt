


**Тема:** Реализация логики "Накопительной системы оценивания".

**Цель:** Настроить поведение журнала оценок при выборе "Накопительной системы".

**Шаг 1: Активация и предварительное условие**
*   Логика применяется, когда активна "Накопительная система".
*   Действия возможны только для уроков со статусом "Проведен".

**Шаг 2: Добавление первой работы к проведенному уроку**
*   **Событие:** Пользователь (учитель) кликает второй раз по ячейке даты/времени урока со статусом "Проведен".
*   **Действие системы:** Открыть модальное окно или панель для ввода данных о работе.
*   **Поля для ввода:**
    1.  `assignment_type`: Выпадающий список или поле для ввода типа работы (примеры: "Контрольная работа", "Проверочная работа", "Текущая", "Домашнее задание", "Работа на уроке", "Работа с проектом", "Классная работа").
    2.  `max_score`: Числовое поле для ввода максимального балла (положительное число).
*   **Действие при сохранении:**
    1.  Сохранить тип работы и `max_score` для этого урока/столбца.
    2.  Изменить цвет фона столбца урока на цвет, соответствующий `assignment_type`.
        *   Назначь предварительные цвета, задай их сам
    3.  Сделать ячейки оценок в этом столбце доступными для ввода.

**Шаг 3: Выставление оценки студенту**
*   **Условие:** Столбец урока должен иметь определенную работу (тип и `max_score`). Ввод оценок в столбец без определенной работы запрещен.
*   **Событие:** Учитель вводит балл в ячейку студента в этом столбце.
*   **Валидация:**
    1.  Введенное значение должно быть числом.
    2.  Введенное значение должно быть >= 0 и <= `max_score`, установленного для этой работы (столбца).
    3.  В ячейке может быть только одна оценка.
*   **Действие системы:** Сохранить оценку.

**Шаг 4: Добавление второй (и последующих) работ к тому же уроку**
*   **Событие:** Учитель кликает на *уже окрашенный* столбец (где уже есть хотя бы одна работа).
*   **Действие системы:** Показать контекстное меню или опцию с действием "Добавить еще одну работу".
*   **При выборе "Добавить еще одну работу":**
    1.  Повторить процесс из **Шага 2** (ввод типа и макс. балла для *новой* работы).
    2.  **Ключевое отличие:** Создать **новый столбец** в таблице, привязанный к той же дате/времени урока, но представляющий *эту новую работу*.
    3.  Окрасить *новый* столбец в цвет, соответствующий типу *новой* работы.
    4.  Сделать ячейки оценок в *новом* столбце доступными для ввода.

**Шаг 5: Расчет и отображение среднего балла**
*   **Данные для расчета:** Все оценки студента и соответствующие максимальные баллы (`max_score`) для *каждой* работы (каждого столбца) в рамках накопительной системы.
*   **Формула:** `Average Percentage = (SUM(student_scores) / SUM(max_scores)) * 100`
*   **Отображение:**
    *   В ячейках оценок: показывать фактический балл (например, "8"). Опционально: "8/10".
    *   В колонке среднего балла: показывать результат расчета по формуле в виде процента (например, "85.0%").

**Итог:** Реализуй описанную логику работы "Накопительной системы", включая добавление работ, выставление оценок, обработку нескольких работ на один урок через добавление новых столбцов и расчет среднего балла в процентах.